{"ast":null,"code":"var _jsxFileName = \"/Users/nikash/DevFestFinal/DevFest25/client/src/Pages/map_view.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport MapComponent from \"../components/maps/MapComponent\";\nimport MapMarkerComponent from \"../components/maps/MapMarker\";\nimport { AdvancedMarker, Pin, useAdvancedMarkerRef } from '@vis.gl/react-google-maps';\nimport { useNavigate } from 'react-router-dom';\nimport { MessageCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MapView() {\n  _s();\n  const [data, setData] = useState({});\n  const [user, setUser] = useState(null);\n  const [markerRef, marker] = useAdvancedMarkerRef();\n  const [modal, setModal] = useState(false);\n  const [showBanner, setShowBanner] = useState(true);\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Load user data from localStorage\n    const userData = JSON.parse(localStorage.getItem('user'));\n    setUser(userData);\n\n    // Load hospital data\n    const hospitalData = require('../data/hospital_stats_ny_with_costs_with_safety_with_loc.json');\n\n    // Filter hospitals based on user profile if needed\n    if (userData) {\n      // You can implement your filtering logic here\n      // For example, filtering based on user's health conditions\n      const filteredData = Object.keys(hospitalData).filter(key => {\n        const hospital = hospitalData[key];\n        // Add your filtering conditions here\n        return hospital.lat != null; // Basic filter for now\n      }).reduce((acc, key) => {\n        acc[key] = hospitalData[key];\n        return acc;\n      }, {});\n      setData(filteredData);\n    } else {\n      setData(hospitalData);\n    }\n\n    // Hide banner after 2 seconds\n    const timer = setTimeout(() => {\n      setShowBanner(false);\n    }, 2000);\n\n    // Cleanup timer\n    return () => clearTimeout(timer);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [showBanner && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-4 left-1/2 transform -translate-x-1/2 z-10 bg-white/90 backdrop-blur-sm px-6 py-2 rounded-lg shadow-lg transition-opacity duration-500\",\n      style: {\n        opacity: showBanner ? 1 : 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-800 font-medium text-center\",\n        children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.firstname, \" \", user === null || user === void 0 ? void 0 : user.lastname]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate('/chat'),\n      className: \"absolute bottom-6 right-6 z-10 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors\",\n      \"aria-label\": \"Open Chat\",\n      children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapComponent, {\n      children: Object.keys(data).map(key => /*#__PURE__*/_jsxDEV(MapMarkerComponent, {\n        details: data[key],\n        userProfile: user // Pass user profile to marker component\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(MapView, \"n7Mk9Zk4W7tz8tYudGsE4IuFdzY=\", false, function () {\n  return [useAdvancedMarkerRef, useNavigate];\n});\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["useState","useEffect","MapComponent","MapMarkerComponent","AdvancedMarker","Pin","useAdvancedMarkerRef","useNavigate","MessageCircle","jsxDEV","_jsxDEV","MapView","_s","data","setData","user","setUser","markerRef","marker","modal","setModal","showBanner","setShowBanner","navigate","userData","JSON","parse","localStorage","getItem","hospitalData","require","filteredData","Object","keys","filter","key","hospital","lat","reduce","acc","timer","setTimeout","clearTimeout","className","children","style","opacity","firstname","lastname","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","details","userProfile","_c","$RefreshReg$"],"sources":["/Users/nikash/DevFestFinal/DevFest25/client/src/Pages/map_view.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport MapComponent from \"../components/maps/MapComponent\";\nimport MapMarkerComponent from \"../components/maps/MapMarker\";\nimport {AdvancedMarker, Pin, useAdvancedMarkerRef} from '@vis.gl/react-google-maps';\nimport { useNavigate } from 'react-router-dom';\nimport { MessageCircle } from 'lucide-react';\n\nfunction MapView() {\n  const [data, setData] = useState({});\n  const [user, setUser] = useState(null);\n  const [markerRef, marker] = useAdvancedMarkerRef();\n  const [modal, setModal] = useState(false);\n  const [showBanner, setShowBanner] = useState(true);\n  const navigate = useNavigate();\n  \n  useEffect(() => {\n    // Load user data from localStorage\n    const userData = JSON.parse(localStorage.getItem('user'));\n    setUser(userData);\n    \n    // Load hospital data\n    const hospitalData = require('../data/hospital_stats_ny_with_costs_with_safety_with_loc.json');\n    \n    // Filter hospitals based on user profile if needed\n    if (userData) {\n      // You can implement your filtering logic here\n      // For example, filtering based on user's health conditions\n      const filteredData = Object.keys(hospitalData)\n        .filter(key => {\n          const hospital = hospitalData[key];\n          // Add your filtering conditions here\n          return hospital.lat != null; // Basic filter for now\n        })\n        .reduce((acc, key) => {\n          acc[key] = hospitalData[key];\n          return acc;\n        }, {});\n        \n      setData(filteredData);\n    } else {\n      setData(hospitalData);\n    }\n\n    // Hide banner after 2 seconds\n    const timer = setTimeout(() => {\n      setShowBanner(false);\n    }, 2000);\n\n    // Cleanup timer\n    return () => clearTimeout(timer);\n  }, []);\n\n  return (\n    <div className=\"relative\">\n      {/* Centered user notification banner */}\n      {showBanner && (\n        <div \n          className=\"absolute top-4 left-1/2 transform -translate-x-1/2 z-10 bg-white/90 backdrop-blur-sm px-6 py-2 rounded-lg shadow-lg transition-opacity duration-500\"\n          style={{ opacity: showBanner ? 1 : 0 }}\n        >\n          <p className=\"text-gray-800 font-medium text-center\">\n            Welcome, {user?.firstname} {user?.lastname}\n          </p>\n        </div>\n      )}\n\n      {/* Chat button */}\n      <button\n        onClick={() => navigate('/chat')}\n        className=\"absolute bottom-6 right-6 z-10 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors\"\n        aria-label=\"Open Chat\"\n      >\n        <MessageCircle className=\"w-6 h-6\" />\n      </button>\n\n      <MapComponent>\n        {Object.keys(data).map((key) => (\n          <MapMarkerComponent \n            key={key} \n            details={data[key]} \n            userProfile={user}  // Pass user profile to marker component\n          />\n        ))}\n      </MapComponent>\n    </div>\n  );\n}\n\nexport default MapView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}